{
  "$schema": "http://json-schema.org/schema#",
  "type": "object",
  "properties": {
    "nameOverride": {
      "type": "string"
    },
    "serverLoadMetric": {
      "type": "string"
    },
    "serverLoadThreshold": {
      "type": "integer"
    },
    "triton": {
      "type": "object",
      "properties": {
        "replicas": {
          "type": "integer"
        },
        "image": {
          "type": "string"
        },
        "command": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "args": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "resources": {
          "type": "object",
          "properties": {
            "limits": {
              "type": "object",
              "properties": {
                "cpu": {
                  "type": "integer"
                },
                "memory": {
                  "type": "string"
                }
              },
              "required": [
                "cpu",
                "memory"
              ]
            },
            "requests": {
              "type": "object",
              "properties": {
                "cpu": {
                  "type": "integer"
                },
                "memory": {
                  "type": "string"
                }
              },
              "required": [
                "cpu",
                "memory"
              ]
            }
          },
          "required": [
            "limits",
            "requests"
          ]
        },
        "affinity": {
          "type": "object"
        },
        "modelRepository": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "mountPath": {
              "type": "string"
            }
          },
          "required": [
            "enabled",
            "mountPath"
          ]
        },
        "service": {
          "type": "object",
          "properties": {
            "labels": {
              "type": "object"
            },
            "annotations": {
              "type": "object"
            },
            "ports": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "port": {
                    "type": "integer"
                  },
                  "targetPort": {
                    "type": "integer"
                  },
                  "protocol": {
                    "type": "string"
                  }
                },
                "required": [
                  "name",
                  "port",
                  "protocol",
                  "targetPort"
                ]
              }
            }
          },
          "required": [
            "annotations",
            "labels",
            "ports"
          ]
        },
        "resetReadinessProbe": {
          "type": "boolean"
        }
      },
      "required": [
        "affinity",
        "args",
        "command",
        "image",
        "modelRepository",
        "replicas",
        "resetReadinessProbe",
        "resources",
        "service"
      ]
    },
    "envoy": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "replicas": {
          "type": "integer"
        },
        "image": {
          "type": "string"
        },
        "args": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "resources": {
          "type": "object",
          "properties": {
            "requests": {
              "type": "object",
              "properties": {
                "cpu": {
                  "type": "integer"
                },
                "memory": {
                  "type": "string"
                }
              },
              "required": [
                "cpu",
                "memory"
              ]
            },
            "limits": {
              "type": "object",
              "properties": {
                "cpu": {
                  "type": "integer"
                },
                "memory": {
                  "type": "string"
                }
              },
              "required": [
                "cpu",
                "memory"
              ]
            }
          },
          "required": [
            "limits",
            "requests"
          ]
        },
        "service": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string"
            },
            "ports": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "port": {
                    "type": "integer"
                  },
                  "targetPort": {
                    "type": "integer"
                  }
                },
                "required": [
                  "name",
                  "port",
                  "targetPort"
                ]
              }
            }
          },
          "required": [
            "ports",
            "type"
          ]
        },
        "grpc_route_timeout": {
          "type": "string"
        },
        "rate_limiter": {
          "type": "object",
          "properties": {
            "listener_level": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "max_tokens": {
                  "type": "integer"
                },
                "tokens_per_fill": {
                  "type": "integer"
                },
                "fill_interval": {
                  "type": "string"
                }
              },
              "required": [
                "enabled",
                "fill_interval",
                "max_tokens",
                "tokens_per_fill"
              ]
            },
            "prometheus_based": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "luaConfig": {
                  "type": "string"
                }
              },
              "required": [
                "enabled",
                "luaConfig"
              ]
            }
          },
          "required": [
            "listener_level",
            "prometheus_based"
          ]
        },
        "loadBalancerPolicy": {
          "type": "string"
        },
        "auth": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "jwt_issuer": {
              "type": "string"
            },
            "jwt_remote_jwks_uri": {
              "type": "string"
            },
            "audiences": {
              "type": "array"
            },
            "url": {
              "type": "string"
            },
            "port": {
              "type": "integer"
            }
          },
          "required": [
            "audiences",
            "enabled",
            "jwt_issuer",
            "jwt_remote_jwks_uri",
            "port",
            "url"
          ]
        }
      },
      "required": [
        "args",
        "auth",
        "enabled",
        "grpc_route_timeout",
        "image",
        "loadBalancerPolicy",
        "rate_limiter",
        "replicas",
        "resources",
        "service"
      ]
    },
    "autoscaler": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "minReplicas": {
          "type": "integer"
        },
        "maxReplicas": {
          "type": "integer"
        },
        "zeroIdleReplicas": {
          "type": "boolean"
        },
        "scaleUp": {
          "type": "object",
          "properties": {
            "window": {
              "type": "integer"
            },
            "period": {
              "type": "integer"
            },
            "stepsize": {
              "type": "integer"
            }
          },
          "required": [
            "period",
            "stepsize",
            "window"
          ]
        },
        "scaleDown": {
          "type": "object",
          "properties": {
            "window": {
              "type": "integer"
            },
            "period": {
              "type": "integer"
            },
            "stepsize": {
              "type": "integer"
            }
          },
          "required": [
            "period",
            "stepsize",
            "window"
          ]
        }
      },
      "required": [
        "enabled",
        "maxReplicas",
        "minReplicas",
        "scaleDown",
        "scaleUp",
        "zeroIdleReplicas"
      ]
    },
    "prometheus": {
      "type": "object",
      "properties": {
        "external": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "url": {
              "type": "string"
            },
            "port": {
              "type": "integer"
            },
            "scheme": {
              "type": "string"
            }
          },
          "required": [
            "enabled",
            "port",
            "scheme",
            "url"
          ]
        },
        "enabled": {
          "type": "boolean"
        },
        "server": {
          "type": "object",
          "properties": {
            "useExistingClusterRoleName": {
              "type": "string"
            },
            "releaseNamespace": {
              "type": "boolean"
            },
            "persistentVolume": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                }
              },
              "required": [
                "enabled"
              ]
            },
            "resources": {
              "type": "object",
              "properties": {
                "requests": {
                  "type": "object",
                  "properties": {
                    "cpu": {
                      "type": "string"
                    },
                    "memory": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "cpu",
                    "memory"
                  ]
                },
                "limits": {
                  "type": "object",
                  "properties": {
                    "cpu": {
                      "type": "integer"
                    },
                    "memory": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "cpu",
                    "memory"
                  ]
                }
              },
              "required": [
                "limits",
                "requests"
              ]
            },
            "retention": {
              "type": "string"
            },
            "global": {
              "type": "object",
              "properties": {
                "scrape_interval": {
                  "type": "string"
                },
                "evaluation_interval": {
                  "type": "string"
                }
              },
              "required": [
                "evaluation_interval",
                "scrape_interval"
              ]
            },
            "service": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "servicePort": {
                  "type": "integer"
                }
              },
              "required": [
                "enabled",
                "servicePort"
              ]
            },
            "configMapOverrideName": {
              "type": "string"
            },
            "ingress": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "hosts": {
                  "type": "array"
                },
                "ingressClassName": {
                  "type": "string"
                },
                "annotations": {
                  "type": "object"
                },
                "tls": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "hosts": {
                        "type": "array"
                      }
                    },
                    "required": [
                      "hosts"
                    ]
                  }
                }
              },
              "required": [
                "annotations",
                "enabled",
                "hosts",
                "ingressClassName",
                "tls"
              ]
            }
          },
          "required": [
            "configMapOverrideName",
            "global",
            "ingress",
            "persistentVolume",
            "releaseNamespace",
            "resources",
            "retention",
            "service",
            "useExistingClusterRoleName"
          ]
        },
        "serviceAccounts": {
          "type": "object",
          "properties": {
            "server": {
              "type": "object",
              "properties": {
                "create": {
                  "type": "boolean"
                },
                "name": {
                  "type": "string"
                }
              },
              "required": [
                "create",
                "name"
              ]
            }
          },
          "required": [
            "server"
          ]
        },
        "rbac": {
          "type": "object",
          "properties": {
            "create": {
              "type": "boolean"
            }
          },
          "required": [
            "create"
          ]
        },
        "alertmanager": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            }
          },
          "required": [
            "enabled"
          ]
        },
        "pushgateway": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            }
          },
          "required": [
            "enabled"
          ]
        },
        "kube-state-metrics": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            }
          },
          "required": [
            "enabled"
          ]
        },
        "prometheus-node-exporter": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            }
          },
          "required": [
            "enabled"
          ]
        },
        "prometheus-pushgateway": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            }
          },
          "required": [
            "enabled"
          ]
        },
        "configmapReload": {
          "type": "object",
          "properties": {
            "prometheus": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                }
              },
              "required": [
                "enabled"
              ]
            }
          },
          "required": [
            "prometheus"
          ]
        }
      },
      "required": [
        "alertmanager",
        "configmapReload",
        "enabled",
        "external",
        "kube-state-metrics",
        "prometheus-node-exporter",
        "prometheus-pushgateway",
        "pushgateway",
        "rbac",
        "server",
        "serviceAccounts"
      ]
    },
    "ingress": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "hostName": {
          "type": "string"
        },
        "ingressClassName": {
          "type": "string"
        },
        "annotations": {
          "type": "object"
        }
      },
      "required": [
        "annotations",
        "enabled",
        "hostName",
        "ingressClassName"
      ]
    },
    "nodeSelector": {
      "type": "object"
    },
    "tolerations": {
      "type": "array"
    },
    "grafana": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "adminUser": {
          "type": "string"
        },
        "adminPassword": {
          "type": "string"
        },
        "persistence": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            }
          },
          "required": [
            "enabled"
          ]
        },
        "rbac": {
          "type": "object",
          "properties": {
            "create": {
              "type": "boolean"
            }
          },
          "required": [
            "create"
          ]
        },
        "serviceAccount": {
          "type": "object",
          "properties": {
            "create": {
              "type": "boolean"
            }
          },
          "required": [
            "create"
          ]
        },
        "datasources": {
          "type": "object",
          "properties": {
            "datasources.yaml": {
              "type": "object",
              "properties": {
                "apiVersion": {
                  "type": "integer"
                },
                "datasources": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string"
                      },
                      "type": {
                        "type": "string"
                      },
                      "access": {
                        "type": "string"
                      },
                      "isDefault": {
                        "type": "boolean"
                      },
                      "url": {
                        "type": "string"
                      },
                      "jsonData": {
                        "type": "object",
                        "properties": {
                          "timeInterval": {
                            "type": "string"
                          },
                          "tlsSkipVerify": {
                            "type": "boolean"
                          }
                        },
                        "required": [
                          "timeInterval",
                          "tlsSkipVerify"
                        ]
                      }
                    },
                    "required": [
                      "access",
                      "isDefault",
                      "jsonData",
                      "name",
                      "type",
                      "url"
                    ]
                  }
                }
              },
              "required": [
                "apiVersion",
                "datasources"
              ]
            }
          },
          "required": [
            "datasources.yaml"
          ]
        },
        "dashboardProviders": {
          "type": "object",
          "properties": {
            "dashboardproviders.yaml": {
              "type": "object",
              "properties": {
                "apiVersion": {
                  "type": "integer"
                },
                "providers": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string"
                      },
                      "orgId": {
                        "type": "integer"
                      },
                      "folder": {
                        "type": "string"
                      },
                      "type": {
                        "type": "string"
                      },
                      "disableDeletion": {
                        "type": "boolean"
                      },
                      "editable": {
                        "type": "boolean"
                      },
                      "options": {
                        "type": "object",
                        "properties": {
                          "path": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "path"
                        ]
                      }
                    },
                    "required": [
                      "disableDeletion",
                      "editable",
                      "folder",
                      "name",
                      "options",
                      "orgId",
                      "type"
                    ]
                  }
                }
              },
              "required": [
                "apiVersion",
                "providers"
              ]
            }
          },
          "required": [
            "dashboardproviders.yaml"
          ]
        },
        "dashboardsConfigMaps": {
          "type": "object",
          "properties": {
            "default": {
              "type": "string"
            }
          },
          "required": [
            "default"
          ]
        },
        "grafana.ini": {
          "type": "object",
          "properties": {
            "auth": {
              "type": "object",
              "properties": {
                "disable_login_form": {
                  "type": "boolean"
                }
              },
              "required": [
                "disable_login_form"
              ]
            },
            "auth.anonymous": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "org_role": {
                  "type": "string"
                }
              },
              "required": [
                "enabled",
                "org_role"
              ]
            },
            "dashboards": {
              "type": "object",
              "properties": {
                "default_home_dashboard_path": {
                  "type": "string"
                }
              },
              "required": [
                "default_home_dashboard_path"
              ]
            }
          },
          "required": [
            "auth",
            "auth.anonymous",
            "dashboards"
          ]
        },
        "resources": {
          "type": "object",
          "properties": {
            "limits": {
              "type": "object",
              "properties": {
                "cpu": {
                  "type": "integer"
                },
                "memory": {
                  "type": "string"
                }
              },
              "required": [
                "cpu",
                "memory"
              ]
            },
            "requests": {
              "type": "object",
              "properties": {
                "cpu": {
                  "type": "string"
                },
                "memory": {
                  "type": "string"
                }
              },
              "required": [
                "cpu",
                "memory"
              ]
            }
          },
          "required": [
            "limits",
            "requests"
          ]
        },
        "service": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string"
            },
            "port": {
              "type": "integer"
            },
            "targetPort": {
              "type": "integer"
            }
          },
          "required": [
            "port",
            "targetPort",
            "type"
          ]
        },
        "ingress": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "path": {
              "type": "string"
            },
            "pathType": {
              "type": "string"
            },
            "ingressClassName": {
              "type": "string"
            },
            "hosts": {
              "type": "array"
            },
            "tls": {
              "type": "array"
            },
            "annotations": {
              "type": "object"
            }
          },
          "required": [
            "annotations",
            "enabled",
            "hosts",
            "ingressClassName",
            "path",
            "pathType",
            "tls"
          ]
        }
      },
      "required": [
        "adminPassword",
        "adminUser",
        "dashboardProviders",
        "dashboardsConfigMaps",
        "datasources",
        "enabled",
        "grafana.ini",
        "ingress",
        "persistence",
        "rbac",
        "resources",
        "service",
        "serviceAccount"
      ]
    }
  },
  "required": [
    "autoscaler",
    "envoy",
    "grafana",
    "ingress",
    "nameOverride",
    "nodeSelector",
    "prometheus",
    "serverLoadMetric",
    "serverLoadThreshold",
    "tolerations",
    "triton"
  ]
}